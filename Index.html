<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Cherrak Infinity ♾️ — دخول</title>
<style>
  body{font-family: "Tajawal", Arial; margin:0; background:#04102a;color:#e8f6ff;display:flex;align-items:center;justify-content:center;height:100vh}
  .card{width:96%;max-width:860px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:28px;border-radius:14px;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,0.6)}
  .logo{font-size:48px}
  input,button{padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit}
  .row{display:flex;gap:10px;justify-content:center;margin-top:18px;flex-wrap:wrap}
  .finger{width:96px;height:96px;border-radius:12px;background:#021426;display:flex;align-items:center;justify-content:center;font-size:44px;cursor:pointer;border:3px solid rgba(0,212,255,0.06)}
  .note{color:#9fb6d9;margin-top:12px}
  .key{font-size:36px;margin-top:14px}
</style>
</head>
<body>
  <div class="card">
    <div class="logo">🧲 Cherrak Infinity ♾️</div>
    <h2>بوابة الدخول — Cherrak Infinity AI</h2>

    <div class="row">
      <div id="finger" class="finger" title="اضغط لمحاكاة البصمة">🫆</div>
      <input id="email" placeholder="البريد الإلكتروني (مثال: admin@cherrak.ai)" value="admin@cherrak.ai" />
      <input id="password" placeholder="كلمة المرور (Bismillah)" type="password" value="Bismillah" />
      <button id="loginBtn">🔐 دخول</button>
    </div>

    <div class="key">🔑</div>
    <div id="status" class="note">الرجاء لمس البصمة ثم الضغط على دخول — كلمة المرور: <strong>Bismillah</strong></div>
    <div style="margin-top:16px">
      <button id="demo">🔎 معاينة سريعة (عرض)</button>
    </div>
  </div>

  <!-- Firebase SDK (v9 modular) -->
  <script type="module">
    // ====== ضع هنا Firebase config من مشروعك =====
    const firebaseConfig = {
      apiKey: "FIREBASE_API_KEY",
      authDomain: "FIREBASE_AUTH_DOMAIN",
      projectId: "FIREBASE_PROJECT_ID",
      storageBucket: "FIREBASE_STORAGE_BUCKET",
      messagingSenderId: "FIREBASE_MESSAGING_SENDER_ID",
      appId: "FIREBASE_APP_ID"
    };
    // =============================================

    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const finger = document.getElementById('finger');
    const loginBtn = document.getElementById('loginBtn');
    const status = document.getElementById('status');
    const demo = document.getElementById('demo');

    let biometricTouched = false;
    finger.addEventListener('click', ()=>{
      finger.animate([{transform:'scale(1)'},{transform:'scale(1.06)'},{transform:'scale(1)'}],{duration:600});
      biometricTouched = true;
      status.textContent = '🔎 تم مسح البصمة (محاكاة)';
    });

    loginBtn.addEventListener('click', async ()=>{
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value.trim();

      if(!biometricTouched){
        status.textContent = 'الرجاء لمس البصمة أولاً';
        return;
      }

      try{
        const userCred = await signInWithEmailAndPassword(auth, email, password);
        status.textContent = '🚀 تم تسجيل الدخول - جاري الانتقال...';
        // optional welcome sound
        try{ new SpeechSynthesisUtterance('Welcome to Cherrak Infinity'); speechSynthesis.speak(new SpeechSynthesisUtterance('Welcome to Cherrak Infinity')); }catch(e){}
        setTimeout(()=> location.href = 'infinity/library.html', 900);
      }catch(err){
        console.error(err);
        status.textContent = '❌ فشل التسجيل: تأكد من البريد/كلمة المرور أو انشئ مستخدماً في Firebase';
      }
    });

    demo.addEventListener('click', ()=> location.href='infinity/library.html');

    // optional: redirect if already logged in
    onAuthStateChanged(auth, user=>{
      if(user) {
        // already logged in
      }
    });
  </script>
</body>
</html>
